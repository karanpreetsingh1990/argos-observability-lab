apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: prometheus-gateway
  namespace: prometheus
spec:
  gatewayClassName: example-gateway-class
  listeners:
    - name: http
      protocol: HTTP
      port: 9000
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: prometheus-route
  namespace: prometheus
spec:
  parentRefs:
    - name: prometheus-gateway
  hostnames:
    - "raspberrypi.local"
  rules:
    - matches:
      - path:
          type: PathPrefix
          value: /prometheus
    - backendRefs:
      - name: prometheus-internal-service
        port: 9090
